.TH GIT-HELP-I-PUSHED-AN-ENV 1 "January 2026" "git-help-i-pushed-an-env" "Git Manual"
.SH NAME
git-help-i-pushed-an-env \- emergency tool to remove secrets from git history
.SH SYNOPSIS
.B git help-i-pushed-an-env
.RI [ options ]
.SH DESCRIPTION
.B git help-i-pushed-an-env
is an emergency tool to completely remove environment secrets, log files, and
other sensitive data from the entire git repository history. This is a
destructive operation that rewrites git history.
.PP
The tool can clean a single repository or batch clean all public and/or
private GitHub repositories owned by the authenticated user.
.PP
.B WARNING:
This will rewrite git history. All collaborators will need to re-clone
or rebase their local copies after running this tool.
.SH OPTIONS
.TP
.BR -h ", " --help
Show help message and exit.
.TP
.BR -n ", " --dry-run
Show what would be removed without making any changes.
.TP
.BR -f ", " --force
Skip all confirmation prompts. Use with caution.
.TP
.BR -v ", " --verbose
Show detailed output during cleaning.
.TP
.B --review
Run
.BR git-scan-for-leaked-envs (1)
after cleaning to verify all secrets have been removed.
.TP
.BI --ext " EXTENSION"
Add a file extension to the removal list. Can be used multiple times.
Example:
.B --ext .pem --ext .key
.TP
.BI --file " PATTERN"
Add a file pattern to the removal list. Can be used multiple times.
Example:
.B --file "config/secrets.json"
.TP
.B --all-public
Run the cleanup on all public GitHub repositories owned by the
authenticated user. Requires GitHub CLI (gh) to be installed and authenticated.
.TP
.B --all-repos
Run the cleanup on all repositories (both public and private) owned by
the authenticated user. Requires GitHub CLI (gh) to be installed and authenticated.
.TP
.B --preserve-recent
Only clean commits older than 24 hours.
.TP
.B --backup
Create a backup branch before cleaning.
.SH DEFAULT FILES REMOVED
The following file types are removed by default:
.SS Environment Files
.RS
.nf
.env, .env.local, .env.development, .env.production
.env.staging, .env.test, *.env
.fi
.RE
.SS Log Files
.RS
.nf
*.log, logs/, npm-debug.log*, yarn-debug.log*
yarn-error.log*, debug.log
.fi
.RE
.SS Key and Certificate Files
.RS
.nf
*.pem, *.key, *.p12, *.pfx, *.jks, *.keystore
id_rsa, id_dsa, id_ecdsa, id_ed25519 (and .pub variants)
.fi
.RE
.SS Configuration Files
.RS
.nf
.npmrc, .pypirc, .netrc, .htpasswd
credentials.json, secrets.json, secrets.yml
service-account*.json, *-credentials.json
.fi
.RE
.SS Cloud Provider Configs
.RS
.nf
.aws/credentials, .aws/config
gcloud-service-key.json, firebase-adminsdk*.json
.fi
.RE
.SS Database and State Files
.RS
.nf
*.sql, *.dump, *.sqlite, *.db
*.tfstate, *.tfstate.*, .terraform/
.fi
.RE
.SH CLEANING METHODS
The tool uses
.BR git-filter-repo (1)
when available (recommended), falling back to
.BR git-filter-branch (1)
if not installed.
.PP
.B git-filter-repo
is significantly faster and more reliable. Install with:
.RS
.B pip install git-filter-repo
.RE
.SH EXIT STATUS
.TP
.B 0
Cleanup completed successfully or no action needed.
.TP
.B 1
Cleanup was cancelled by user.
.TP
.B 2
An error occurred during cleanup.
.SH EXAMPLES
.TP
.B git help-i-pushed-an-env
Interactive cleanup of the current repository.
.TP
.B git help-i-pushed-an-env --dry-run
Preview what would be removed without making changes.
.TP
.B git help-i-pushed-an-env --ext .pem --file "config/secrets.json"
Clean default files plus additional specified patterns.
.TP
.B git help-i-pushed-an-env --review
Clean the repository and verify with AI-powered scan.
.TP
.B git help-i-pushed-an-env --all-public --force
Clean all public repositories without confirmation prompts.
.TP
.B git help-i-pushed-an-env --all-repos --backup
Clean all repositories, creating backup branches.
.SH POST-CLEANUP STEPS
After running this tool:
.PP
.RS
.IP 1. 3
Review the changes:
.B git log --oneline
.IP 2.
Force push to remote:
.B git push --force --all
.IP 3.
Force push tags:
.B git push --force --tags
.IP 4.
Notify collaborators to re-clone or run:
.B git fetch --all && git reset --hard origin/<branch>
.IP 5.
.B IMPORTANT:
Rotate all exposed credentials immediately!
.RE
.SH IMPORTANT NOTES
.IP \(bu 2
.B Assume all exposed credentials are compromised.
Even after cleaning history, attackers may have already accessed your repository.
.IP \(bu 2
.B Rotate credentials before running this tool.
The goal is to prevent future exposure, not to undo past exposure.
.IP \(bu 2
.B Coordinate with collaborators.
History rewriting affects everyone working on the repository.
.SH SEE ALSO
.BR git-scan-for-leaked-envs (1),
.BR git-filter-repo (1),
.BR git-filter-branch (1),
.BR gh (1)
.SH AUTHOR
Generated by GitHub Copilot.
